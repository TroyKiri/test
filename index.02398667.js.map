{"mappings":"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","sources":["./src/js/index.js","./src/js/validation/Validation.js"],"sourcesContent":["import { FormValidator } from './validation/Validation.js';\r\n\r\n// Таймер обратного отсчета\r\n\r\n// Дни\r\nconst days = document.querySelector('.timer__days');\r\n// Часы\r\nconst hours = document.querySelector('.timer__hours');\r\n// Минуты\r\nconst minutes = document.querySelector('.timer__minutes');\r\n// Секунды\r\nconst seconds = document.querySelector('.timer__seconds');\r\n\r\nconst date = { days, hours, minutes, seconds };\r\n\r\n// Конечная дата\r\nconst endtime = 'July 16 2021 17:00:00'\r\n\r\n// Считаем оставшееся время\r\nfunction getTimeRemaining(endtime){\r\n  const total = Date.parse(endtime) - Date.parse(new Date());\r\n  const seconds = Math.floor( (total/1000) % 60 );\r\n  const minutes = Math.floor( (total/1000/60) % 60 );\r\n  const hours = Math.floor( (total/(1000*60*60)) % 24 );\r\n  const days = Math.floor( total/(1000*60*60*24) );\r\n  return { total, days, hours, minutes, seconds };\r\n}\r\n\r\n//Обновление и отображание таймера\r\nfunction updateTimer(date, endtime) {\r\n  const time = getTimeRemaining(endtime);\r\n  date.days.innerHTML = time.days;\r\n  date.hours.innerHTML = time.hours;\r\n  date.minutes.innerHTML = time.minutes;\r\n  date.seconds.innerHTML = time.seconds;\r\n\r\n  if(time.total<=0){\r\n    clearInterval(timeInterval);\r\n  }\r\n}\r\n\r\nupdateTimer(date, endtime);\r\nsetInterval(updateTimer, 1000, date, endtime);\r\n\r\n\r\n// Форма\r\n\r\nconst form = document.forms.form;\r\nconst button = form.elements.submit;\r\n\r\nconst popupError = document.querySelector('.popup__error');\r\nconst popupButtonError = popupError.querySelector('.popup__button')\r\n\r\nconst popupYes = document.querySelector('.popup__yes');\r\nconst popupButtonYes = popupYes.querySelector('.popup__button');\r\n\r\nconst popupNo = document.querySelector('.popup__no');\r\nconst popupButtonNo = popupNo.querySelector('.popup__button');\r\n\r\nconst preloader = document.querySelector('.circle-preloader__container');\r\n\r\nconst formValidator = new FormValidator(form);\r\n\r\n// formValidator.setEventListeners();\r\n\r\nfunction renderPreloader(preloader, form) {\r\n  preloader.classList.add('circle-preloader__container_active');\r\n  form.classList.add('form__arrea_not-active');\r\n}\r\nfunction removePreloader(preloader, form) {\r\n  preloader.classList.remove('circle-preloader__container_active');\r\n  form.classList.remove('form__arrea_not-active');\r\n}\r\n\r\nfunction openPopup(popup, button) {\r\n  popup.classList.add('popup_is-opened');\r\n  \r\n  function closePopup() {\r\n    popup.classList.remove('popup_is-opened');\r\n  }\r\n\r\n  button.addEventListener('click', closePopup);\r\n}\r\n\r\nfunction sendForm(form) {\r\n  renderPreloader(preloader, form);\r\n\r\n  const name = form.elements.name.value;\r\n  const secondName = form.elements.secondName.value;\r\n  const presence = form.elements.presence.value;\r\n\r\n  const data = { name, secondName, presence};\r\n\r\n  form.reset();\r\n\r\n  fetch('https://sheet.best/api/sheets/f71febad-82d0-45bc-9317-f6c80290f14a', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify(data)\r\n  })\r\n    .then((res) => {\r\n      removePreloader(preloader, form);\r\n      if (presence === \"yes\") {\r\n        openPopup(popupYes, popupButtonYes);\r\n      } else {\r\n        openPopup(popupNo, popupButtonNo)\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      removePreloader(preloader, form);\r\n      openPopup(popupError, popupButtonError);\r\n    });\r\n}\r\n\r\nbutton.addEventListener('click', (event) => {\r\n  event.preventDefault();\r\n  if (formValidator.checkValid()) {\r\n    sendForm(form);\r\n  }\r\n});\r\n\r\nwindow.onload = function() {\r\n  setTimeout(function() {\r\n    document.querySelector('.page').classList.add('page_loaded');\r\n    document.querySelector('.circle-preloader__container_page').classList.remove('circle-preloader__container_page_active');\r\n  }, 1500)\r\n}","export class FormValidator {\r\n  constructor(form) {\r\n    this.form = form;\r\n  }\r\n\r\n  checkInputValidity(input, error){\r\n    let isValid = true;\r\n    if (input.validity.valueMissing) {\r\n      isValid = false;\r\n      this.addError(error);\r\n      error.textContent = 'Пожалуйста, заполните поле';\r\n    } else {\r\n      this.removeError(error);\r\n      error.textContent = '';\r\n    }\r\n    return isValid\r\n  }\r\n\r\n  setSubmitButtonState(button, status) {\r\n    if (status === true) {\r\n      button.classList.remove('form__button_disabled');\r\n    } else {\r\n      button.classList.add('form__button_disabled');\r\n    }\r\n  }\r\n\r\n  chooseButton() {\r\n    return Array.from(this.form.elements).find((elem) => {\r\n      return elem.classList.contains('form__button');\r\n    })\r\n  }\r\n\r\n  addError(error) {\r\n    error.classList.add('form__error_active');\r\n  }\r\n  removeError(error) {\r\n    error.classList.remove('form__error_active');\r\n  }\r\n\r\n  chooseError() {\r\n    const errors = [];\r\n    Array.from(this.form.elements).forEach((elem) => {\r\n      if (elem.classList.contains('form__input')) {\r\n        errors.push(elem.nextElementSibling);\r\n      }\r\n    })\r\n    return errors;\r\n  }\r\n\r\n  checkValid() {\r\n    let isFormValid = true;\r\n    this.button = this.chooseButton();\r\n    Array.from(form.elements).forEach((item) => {\r\n      if (item.classList.contains('form__input')) {\r\n        const isValid = this.checkInputValidity(item, item.nextElementSibling);\r\n        if (!isValid) {\r\n          isFormValid = false\r\n        }\r\n        this.setSubmitButtonState(this.button, isFormValid);\r\n        item.addEventListener('focus', () => {\r\n          const errors = this.chooseError();\r\n          this.removeError(errors[0]);\r\n          this.removeError(errors[1]);\r\n          this.setSubmitButtonState(this.button, true)\r\n        })\r\n      }\r\n    })\r\n    return isFormValid;\r\n  }\r\n}"],"names":["$f6dfaefb9e5b052f09219a53921da9fa$var$date","days","document","querySelector","hours","minutes","seconds","$f6dfaefb9e5b052f09219a53921da9fa$var$endtime","$f6dfaefb9e5b052f09219a53921da9fa$var$updateTimer","date","endtime","time","total","Date","parse","Math","floor","$f6dfaefb9e5b052f09219a53921da9fa$var$getTimeRemaining","innerHTML","clearInterval","timeInterval","setInterval","$f6dfaefb9e5b052f09219a53921da9fa$var$form","forms","form","$f6dfaefb9e5b052f09219a53921da9fa$var$button","elements","submit","$f6dfaefb9e5b052f09219a53921da9fa$var$popupError","$f6dfaefb9e5b052f09219a53921da9fa$var$popupButtonError","$f6dfaefb9e5b052f09219a53921da9fa$var$popupYes","$f6dfaefb9e5b052f09219a53921da9fa$var$popupButtonYes","$f6dfaefb9e5b052f09219a53921da9fa$var$popupNo","$f6dfaefb9e5b052f09219a53921da9fa$var$popupButtonNo","$f6dfaefb9e5b052f09219a53921da9fa$var$preloader","$f6dfaefb9e5b052f09219a53921da9fa$var$formValidator","constructor","this","checkInputValidity","input","error","isValid","validity","valueMissing","addError","textContent","removeError","setSubmitButtonState","button","status","classList","remove","add","chooseButton","Array","from","find","elem","contains","chooseError","errors","forEach","push","nextElementSibling","checkValid","isFormValid","item","addEventListener","$f6dfaefb9e5b052f09219a53921da9fa$var$removePreloader","preloader","$f6dfaefb9e5b052f09219a53921da9fa$var$openPopup","popup","event","preventDefault","$f6dfaefb9e5b052f09219a53921da9fa$var$renderPreloader","name","value","secondName","presence","data","reset","fetch","method","headers","Content-Type","body","JSON","stringify","then","res","catch","err","$f6dfaefb9e5b052f09219a53921da9fa$var$sendForm","window","onload","setTimeout"],"version":3,"file":"index.02398667.js.map"}